/*!
 * MiniBar 0.1.9
 * http://mobius.ovh/
 *
 * Released under the MIT license
 */
!function(t){"use strict";function e(t,e,n){var o;return function(){var s=this,i=arguments,r=n&&!o;clearTimeout(o),o=setTimeout(function(){o=null,n||t.apply(s,i)},e),r&&t.apply(s,i)}}var n={barType:"default",minBarSize:10,alwaysShowBars:!1,containerClass:"mb-container",contentClass:"mb-content",trackClass:"mb-track",barClass:"mb-bar",visibleClass:"mb-visible",progressClass:"mb-progress",hoverClass:"mb-hover",scrollingClass:"mb-scrolling",textareaClass:"mb-textarea"},o=function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),o=1;o<arguments.length;o++){var s=arguments[o];if(null!=s)for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])}return n},s=function(t,e,n){if("[object Object]"===Object.prototype.toString.call(t))for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(n,o,t[o]);else for(var s=0,i=t.length;s<i;s++)e.call(n,s,t[s])},i=function(t,e,n){var o=t&&t.style,i="[object Object]"===Object.prototype.toString.call(e);if(o){if(void 0===n&&!i)return n=window.getComputedStyle(t),void 0===e?n:n[e];i?s(e,function(t,e){t in o||(t="-webkit-"+t),o[t]=e+("string"==typeof e?"":"opacity"===t?"":"px")}):(e in o||(e="-webkit-"+e),o[e]=n+("string"==typeof n?"":"opacity"===e?"":"px"))}},r=function(t){var e=window,n=document,o=n.body,s=t.getBoundingClientRect(),i=void 0!==e.pageXOffset?e.pageXOffset:(n.documentElement||o.parentNode||o).scrollLeft,r=void 0!==e.pageYOffset?e.pageYOffset:(n.documentElement||o.parentNode||o).scrollTop;return{x:s.left+i,y:s.top+r,height:Math.round(s.height),width:Math.round(s.width)}},a=window.requestAnimationFrame||function(){var t=0;return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){var n,o=(new Date).getTime();return n=Math.max(0,16-(o-t)),t=o+n,setTimeout(function(){e(o+n)},n)}}(),c=function(t,e,n,o){return n*Math.sqrt(1-(t=t/o-1)*t)+e},l=function(){var t=0,e=document.createElement("div");return e.style.cssText="width: 100; height: 100; overflow: scroll; position: absolute; top: -9999;",document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e),t},d=function(t,s){this.container=t,"string"==typeof content&&(this.container=document.querySelector(t)),this.config=o({},n,s||window.MiniBarOptions||{}),this.css=window.getComputedStyle(this.container),this.scrollbarSize=l(),this.textarea="textarea"===this.container.nodeName.toLowerCase(),this.bars={x:{},y:{}},this.tracks={x:{},y:{}},this.trackPos={x:"left",y:"top"},this.trackSize={x:"width",y:"height"},this.scrollPos={x:"scrollLeft",y:"scrollTop"},this.scrollSize={x:"scrollWidth",y:"scrollHeight"},this.offsetAxis={x:"offsetX",y:"offsetY"},this.mouseAxis={x:"pageX",y:"pageY"},this.events={update:this.update.bind(this),scroll:this.scroll.bind(this),mouseenter:this.mouseenter.bind(this),mousedown:this.mousedown.bind(this),mousemove:this.mousemove.bind(this),mouseup:this.mouseup.bind(this),mousewheel:this.mousewheel.bind(this)},this.events.debounce=e(this.events.update,50),this.init()};d.prototype.init=function(){var t=this;if(!t.initialised){if(t.textarea)t.content=t.container,t.container=document.createElement("div"),t.container.classList.add(t.config.textareaClass),t.content.parentNode.insertBefore(t.container,t.content),t.container.appendChild(t.content),t.content.addEventListener("input",function(e){t.update()});else for(t.content=document.createElement("div");t.container.firstChild;)t.content.appendChild(t.container.firstChild);t.container.classList.add(t.config.containerClass),t.content.classList.add(t.config.contentClass),t.config.alwaysShowBars&&t.container.classList.add(t.config.visibleClass),s(t.tracks,function(e,n){t.bars[e].node=document.createElement("div"),n.node=document.createElement("div"),n.node.classList.add(t.config.trackClass),n.node.classList.add(t.config.trackClass+"-"+e),t.bars[e].node.classList.add(t.config.barClass),n.node.appendChild(t.bars[e].node),t.container.appendChild(n.node),"progress"===t.config.barType?(n.node.classList.add(t.config.progressClass),n.node.addEventListener("mousedown",t.events.mousedown)):t.bars[e].node.addEventListener("mousedown",t.events.mousedown),n.node.addEventListener("mouseenter",function(n){t.container.classList.add(t.config.hoverClass+"-"+e)}),n.node.addEventListener("mouseleave",function(n){t.down||t.container.classList.remove(t.config.hoverClass+"-"+e)})}),t.container.appendChild(t.content),"static"===t.css.position&&(t.manualPosition=!0,t.container.style.position="relative"),t.update(),t.content.addEventListener("scroll",t.events.scroll),t.content.addEventListener("wheel",t.events.mousewheel),t.container.addEventListener("mouseenter",t.events.mouseenter),window.addEventListener("resize",t.events.debounce),document.addEventListener("DOMContentLoaded",t.events.update),window.addEventListener("load",t.events.update),t.initialised=!0}},d.prototype.scroll=function(t){this.updateScrollBars()},d.prototype.mousewheel=function(t){if(this.config.horizontalMouseScroll){t.preventDefault();var e=this,n=t.deltaY,o=Date.now(),s=function(){var t=Date.now()-o,i=c(t,0,8,400);t>400?cancelAnimationFrame(e.frame):(n<0?e.content.scrollLeft-=i:n>0&&(e.content.scrollLeft+=i),e.frame=a(s))};s()}},d.prototype.mouseenter=function(t){this.updateScrollBars()},d.prototype.mousedown=function(t){t.preventDefault(),this.down=!0;var e="progress"===this.config.barType?"tracks":"bars",n=t.target===this[e].x.node?"x":"y";this.currentAxis=n,this.update(),this.container.classList.add(this.config.visibleClass),this.container.classList.add(this.config.scrollingClass+"-"+this.currentAxis),"progress"===this.config.barType?(this.origin={x:t.pageX-this.tracks[n].x,y:t.pageY-this.tracks[n].y},this.mousemove(t)):this.origin={x:t.pageX-this.bars[n].x,y:t.pageY-this.bars[n].y},document.addEventListener("mousemove",this.events.mousemove),document.addEventListener("mouseup",this.events.mouseup)},d.prototype.mousemove=function(t){t.preventDefault();var e,n,o=this,s=this.origin,i=o.tracks[o.currentAxis],r=i[o.trackSize[o.currentAxis]],c=o.rect[o.trackSize[o.currentAxis]];"progress"===o.config.barType?(e=t[o.mouseAxis[o.currentAxis]]-i[o.currentAxis],n=e/r*(o.content[o.scrollSize[o.currentAxis]]-c)):(e=t[o.mouseAxis[o.currentAxis]]-s[o.currentAxis]-i[o.currentAxis],n=e/r*o[o.scrollSize[o.currentAxis]]),a(function(){o.content[o.scrollPos[o.currentAxis]]=n})},d.prototype.mouseup=function(t){this.container.classList.toggle(this.config.visibleClass,this.config.alwaysShowBars),this.container.classList.remove(this.config.scrollingClass+"-"+this.currentAxis),t.target.classList.contains(this.config.barClass)||(this.container.classList.remove(this.config.hoverClass+"-x"),this.container.classList.remove(this.config.hoverClass+"-y")),this.origin={},this.currentAxis=null,this.down=!1,document.removeEventListener("mousemove",this.events.mousemove),document.removeEventListener("mouseup",this.events.mouseup)},d.prototype.update=function(){var t=this;t.rect=r(t.container),t.scrollTop=t.content.scrollTop,t.scrollLeft=t.content.scrollLeft,t.scrollHeight=t.content.scrollHeight,t.scrollWidth=t.content.scrollWidth;var e=t.scrollWidth>t.rect.width&&!t.textarea,n=t.scrollHeight>t.rect.height;t.container.classList.toggle("mb-scroll-x",e),t.container.classList.toggle("mb-scroll-y",n),i(t.content,{overflow:"auto",marginBottom:e?-t.scrollbarSize:"",paddingBottom:e?t.scrollbarSize:"",marginRight:n?-t.scrollbarSize:"",paddingRight:n?t.scrollbarSize:""}),t.scrollX=e,t.scrollY=n,s(t.tracks,function(e,n){o(n,r(n.node)),o(t.bars[e],r(t.bars[e].node))}),t.updateScrollBars(),t.textarea&&!t.down&&t.content.selectionStart>=t.content.value.length&&(t.content.scrollTop=t.scrollHeight+1e3)},d.prototype.updateScrollBar=function(t){var e=this,n={},o=e.tracks[t][e.trackSize[t]],s=e.rect[e.trackSize[t]],r=e.content[e.scrollPos[t]],c=o/e[e.scrollSize[t]],l=r/(e[e.scrollSize[t]]-s);"progress"===e.config.barType?n[e.trackSize[t]]=Math.floor(o*l):(n[e.trackSize[t]]=Math.max(Math.floor(c*s),e.config.minBarSize),n[e.trackPos[t]]=Math.floor((o-n[e.trackSize[t]])*l)),a(function(){i(e.bars[t].node,n)})},d.prototype.updateScrollBars=function(){s(this.bars,function(t,e){this.updateScrollBar(t)},this)},d.prototype.destroy=function(){var t=this;if(t.initialised){for(t.container.removeEventListener("mouseenter",t.events.mouseenter),window.removeEventListener("resize",t.events.debounce),t.container.classList.remove(t.config.visibleClass),t.container.classList.remove(t.config.containerClass);t.content.firstChild;)t.container.appendChild(t.content.firstChild);s(t.tracks,function(e,n){t.container.removeChild(n.node),t.container.classList.remove("mb-scroll-"+e)}),t.container.removeChild(t.content),t.manualPosition&&(t.container.style.position="",null!==t.container.getAttribute("style")&&t.container.getAttribute("style").length||t.container.removeAttribute("style")),t.bars={x:{},y:{}},t.tracks={x:{},y:{}},t.content=null,t.initialised=!1}},t.MiniBar=d}(this);